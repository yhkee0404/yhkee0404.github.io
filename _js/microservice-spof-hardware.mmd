flowchart TB

    subgraph monolith[Monolith: 2/4 * 1/3]

        sc2a-.-hu3c1
        sc2b-.-hu3c2

        subgraph Source Code

        sc2a--->sc2b

        sc2a[A]
        sc2b[B]
        end
        
        subgraph Hardware Unit 1

        %% hu3c1 e1@--> hu3c2
        hu3c1 --> hu3c2

        hu3c1[Consumed
                0]:::consumed
        hu3c2[Consumed
                0]:::consumed
        hu3u1[Unavailable
                1/2]:::unavailable
        hu3u2[Unavailable
                1/2]:::unavailable
        end
        
    end

    subgraph microservice[Microservice: 2/4 * 2/4]

        sc1a-.-hu1c1
        sc1b-.-hu2c1

        %% hu1c1 e2@--> lb1 e3@--> hu2c1
        hu1c1 --> lb1 --> hu2c1

        lb1[Optional
                API Gateway]:::api-gateway

        subgraph Hardware Unit 2
        hu2c1[Consumed
                0]:::consumed
        hu2a2[Available
                1/3]:::available
        hu2u1[Unavailable
                1/3]:::unavailable
        hu2u2[Unavailable
                1/3]:::unavailable
        end

        subgraph Hardware Unit 1
        hu1c1[Consumed
                0]:::consumed
        hu1a2[Available
                1/3]:::available
        hu1u1[Unavailable
                1/3]:::unavailable
        hu1u2[Unavailable
                1/3]:::unavailable
        end

        subgraph Source Code
        sc1a--->sc1b
        sc1a[A]
        sc1b[B]
        end

    end

    subgraph Initial Hardware Unit
    ihua1[Available
            1/4]:::available
    ihua2[Available
            1/4]:::available
    ihuu1[Unavailable
            1/4]:::unavailable
    ihuu2[Unavailable
            1/4]:::unavailable
    end

classDef consumed fill:#000,color:#f96
classDef available fill:#0f0
classDef unavailable fill:#f00,color:#fff
classDef api-gateway fill:#f96

%% edge classes not supported in v11.2.0
%% classDef animate stroke:#f96,stroke-dasharray: 9,stroke-dashoffset: 900,animation: dash 25s linear infinite;
%% class e1 animate
%% class e2 animate
%% class e3 animate
linkStyle 3,6,7 stroke:#f96,stroke-dasharray: 9,stroke-dashoffset: 900,animation: dash 25s linear infinite;